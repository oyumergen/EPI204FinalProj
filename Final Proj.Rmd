---
title: "Final Project"
output:
  html_document: default
  pdf_document: default
date: "2025-04-25"
---

```{r}
library(tidyverse) 
NHANES2 <- read.csv("NHANES2-1 (1).csv")
```


```{r}
d <- NHANES2 %>% 
  select('ROWNAMES','SEX','RACE','MARRY','DEATH','AGEYRS',
                    'GRADES','WT', 'BOOZE', 'SIZE',
         'AVGSMK', "HEIGHT", "EXAM_YR", "DIE_YR", "LAST_YR")
```

```{r}
#Exclude missing death 
d <- d %>%
  filter(!is.na(DEATH))

d <- d %>%
  mutate(BMI = WT/(HEIGHT/100)^2,
         BOOZE_q = cut(BOOZE,breaks =  c(-1, 0, 0.5, 2.0, 77.0),
                       include.lowest = T)) 
dim(d)

```

```{r}
if (!require("tableone")) {
  install.packages("tableone")
}
library(tableone)


vars <- c("AGEYRS", "SEX", "RACE", "MARRY", "BMI", "GRADES", "AVGSMK", "SIZE")
catVars <- c("SEX", "RACE", "MARRY", "GRADES", "SIZE")  

#Table 1
table1 <- CreateTableOne(vars = vars, 
                         data = d, 
                         strata = "BOOZE_q",  
                         factorVars = catVars)


print(table1, showAllLevels = TRUE)
```



